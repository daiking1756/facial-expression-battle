<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>SkyWay - P2P Media example</title>
    <link rel="stylesheet" href="/assets/css/style.css">
    <link rel="stylesheet" href="/assets/css/countdown.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@2.8.0"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/uikit@3.4.3/dist/css/uikit.min.css" />

    <script src="https://code.jquery.com/jquery-3.5.1.slim.js" integrity="sha256-DrT5NfxfbHvMHux31Lkhxg42LY6of8TaYyK50jnxRnM=" crossorigin="anonymous"></script>
  </head>
  <body>
    <div class="container uk-container">
      <h1 class="uk-heading-line uk-text-center"><span>Facial Expression Battle</span></h1>
      <p class="note">Enter remote peer ID to start Facial Expression Battle.</p>
      <p>Your ID: <span id="js-local-id" class="uk-text-bolder uk-text-primary">No User</span></p>

      <div id="countdown-animation">
        <div class="demo">
          <div class="demo__colored-blocks">
            <div class="demo__colored-blocks-rotater">
              <div class="demo__colored-block"></div>
              <div class="demo__colored-block"></div>
              <div class="demo__colored-block"></div>
            </div>
            <div class="demo__colored-blocks-inner"></div>
            <div class="demo__text">Ready</div>
          </div>
          <div class="demo__inner">
            <svg class="demo__numbers" viewBox="0 0 100 100">
              <defs>
                <path class="demo__num-path-1" d="M40,28 55,22 55,78"/>
                <path class="demo__num-join-1-2" d="M55,78 55,83 a17,17 0 1,0 34,0 a20,10 0 0,0 -20,-10"/>
                <path class="demo__num-path-2" d="M69,73 l-35,0 l30,-30 a16,16 0 0,0 -22.6,-22.6 l-7,7"/>
                <path class="demo__num-join-2-3" d="M28,69 Q25,44 34.4,27.4"/>
                <path class="demo__num-path-3" d="M30,20 60,20 40,50 a18,15 0 1,1 -12,19"/>
              </defs>
              <path class="demo__numbers-path"
                    d="M-10,20 60,20 40,50 a18,15 0 1,1 -12,19
                      Q25,44 34.4,27.4
                      l7,-7 a16,16 0 0,1 22.6,22.6 l-30,30 l35,0 L69,73
                      a20,10 0 0,1 20,10 a17,17 0 0,1 -34,0 L55,83
                      l0,-61 L40,28" />
            </svg>
          </div>
        </div>
      </div>

        <div class="uk-margin">
          <!-- <button id="js-call-trigger" class="uk-button uk-button-primary" onClick="callToRemote()">Call</button> -->
          <!-- <button id="js-close-trigger" class="uk-button uk-button-danger">Close</button> -->
          <button class="btn uk-button uk-button-default" data-clipboard-target="#js-invite-url" onClick="invite()">Invite</button>
          <button class="uk-button uk-button-default" onclick="processImage()">Battle</button>
          <label>taget facial expression: </label><span id="target-facial-expression" class="uk-text-bolder uk-text-default">????</span>
          <span id="countdown" class="uk-text-bolder uk-text-primary"></span>
        </div>
        <div class="uk-margin">
          <span id="js-invite-url" class="uk-text-bolder uk-text-primary"></span>
        </div>
        <div class="p2p-media">
        <div class="local-stream uk-card uk-card-default uk-card-body">
          <h4 class="uk-heading-line uk-text-center"><span>Local Stream</span></h4>
          <video id="js-local-stream"></video>
          <h4 class="uk-heading-line uk-text-center"><span>Local Snapshot</span></h4>
          <canvas id="local-canvas"></canvas>
        </div>
        <div class="remote-stream uk-card uk-card-default uk-card-body">
          <h4 class="uk-heading-line uk-text-center"><span>Remote Stream</span></h4>
          <video id="js-remote-stream"></video>
          <h4 class="uk-heading-line uk-text-center"><span>Remote Snapshot</span></h4>
          <canvas id="remote-canvas"></canvas>
        </div>
      </div>

      <div class="chart uk-card uk-card-default uk-card-body">
        <canvas id="emotion-chart"></canvas>
      </div>

      <p class="meta" id="js-meta"></p>
    </div>
    <script src="https://unpkg.com/clipboard@2/dist/clipboard.min.js"></script>
    <script src="//cdn.webrtc.ecl.ntt.com/skyway-latest.js"></script>
    <script src="/key.js"></script>
    <script src="/assets/js/get-param.js"></script>
    <script src="/assets/js/p2p-media.js"></script>
    <script src="/assets/js/face.js"></script>
    <script src="/assets/js/invite.js"></script>
  </body>
</html>
